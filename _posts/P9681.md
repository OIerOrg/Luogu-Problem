---
title: "幽默的世界。"
layout: "post"
diff: 普及/提高-
pid: P9681
tag: ['洛谷原创', 'O2优化', '前缀和', '洛谷月赛']
usemathjax: true
---

# 幽默的世界。
## 题目背景

@【数据删除】 : 大家觉得呢 || @【数据删除】 : oi 生活总是充满了幽默。 不过学文化课或许也好不了多少？
## 题目描述

给定一个长为 $n$ 的序列 $a_1,a_2,\cdots,a_n$，定义 $a$ 的一个连续子序列 $a_l,a_{l+1},\cdots,a_r$ 是幽默的，当且仅当：

- $\sum\limits_{i=l}^ra_i>0$；
- 对于所有 $l\le x\le y<r$，满足 $\sum\limits_{i=x}^y a_i\le 0$。

$q$ 次询问，每次给定两个整数 $l,r$，查询满足以下条件的数对 $(l',r')$ 个数：

- $l\le l'\le r'\le r$；
- 连续子序列 $a_{l'},a_{l'+1},\cdots a_{r'}$ 是幽默的。
## 输入格式

第一行输入两个整数 $n,q$。

接下来一行输入 $n$ 个整数，第 $i$ 个整数代表 $a_i$。

接下来 $q$ 行，每行输入两个整数 $l,r$，代表一次询问。
## 输出格式

对于每组询问，输出一行一个整数，代表答案。
## 样例

### 样例输入 #1
```
4 3
3 -4 -1 2
1 2
3 4
1 4

```
### 样例输出 #1
```
1
2
3

```
### 样例输入 #2
```
7 6
-1 2 -1 -1 -1 2 -1
2 5
4 7
1 7
5 5
1 3
2 4

```
### 样例输出 #2
```
1
2
4
0
2
1

```
## 提示

对于所有数据，保证 $1\le n,q\le 2\times 10^5$，$1\le l\le r\le n$，$|a_i|\le 10^9$。

### 子任务

|  #   |       特殊性质        | 分值 |
| :--: | :-------------------: | :--: |
|  0   |         样例          |  0   |
|  1   |      $n,q\le 50$      |  15  |
|  2   | $n,q\le 3\times 10^3$ |  20  |
|  3   |  对于所有询问，$r=n$  |  15  |
|  4   |  对于所有询问，$l=1$  |  15  |
|  5   |           -           |  35  |


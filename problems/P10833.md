---
title: "[COTS/CETS 2023] 下 Niz"
layout: "post"
diff: 省选/NOI-
pid: P10833
tag: ['线段树', '2023', 'O2优化', '分治', 'CEOI（中欧）', '哈希, hash', 'COCI（克罗地亚）', '单调栈']
---
# [COTS/CETS 2023] 下 Niz
## 题目背景


译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D2T2。$\texttt{1s,0.5G}$。

祝 NaCly_Fish 生日快乐！（2024.7.28）
## 题目描述


给定长度为 $N$ 的序列 $a$，求满足以下条件的 $(l,r)$ 对数：

- $1\le l\le r\le N$；
- $a_l,a_{l+1},\cdots,a_{r-1},a_r$ 是 $1\sim r-l+1$ 的排列。

## 输入格式


第一行，一个正整数 $N$，表示序列长度；

第二行，$N$ 个正整数，描述序列 $a$。
## 输出格式

一行一个整数，即满足条件的 $(l,r)$ 的数量。
## 样例

### 样例输入 #1
```
3
3 1 2 
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
5
3 2 1 2 3
```
### 样例输出 #2
```
5
```
### 样例输入 #3
```
7
2 1 3 1 2 3 4
```
### 样例输出 #3
```
8
```
## 提示


### 样例解释

样例 $3$ 解释：满足条件的 $(l,r)$ 有 $(2,2),(1,2),(1,3),(4,4),(4,5),(4,6),(4,7),(3,5)$。   

#### 数据范围

对于 $100\%$ 的数据，保证：

- $1\le N\le 10^6$；
- $1\le a_i\le N$。

| 子任务编号 | 分值 | 约束  |
|:-----:|:------:|:-------:|
| $1$  | $13$  | 每个数只在序列中出现一次  |
| $2$  | $20$  | $N\le 5\, 000$  |
| $3$  | $33$  | $N\le 50\, 000$ |
| $4$  | $34$  | 无额外约束 |





---
diff: 提高+/省选-
pid: P1237
name: 冗余依赖
tag: ['搜索', '数学']
---
# 冗余依赖
## 题目描述

在设计关系数据库的表格时，术语“函数依赖”（FD）被用来表示不同域之间的关系。函数依赖是描述一个集合中的域的值与另一个集合中的域的值之间的关系。记号 $X \to Y$ 被用来表示当集合 $X$ 中的域被赋值后，集合 $Y$ 的域就可以确定相应的值。例如，一个数据表格包含“社会治安编号”（$S$）、“姓名”（$N$）、“地址”（$A$）、“电话”（$P$）的域，并且每个人都与某个特定的互不相同的 $S$ 值相对应，根据域 $S$ 就可以确定域 $N$ 、 $A$ 、 $P$ 的值。这就记作 $S \to \{N,A,P\}$。

写一个程序以找出一组依赖中所有的冗余依赖。一个依赖是冗余的是指它可以通过组里的其他依赖得到。例如，如果组里包括依赖 $A \to B$ 、 $B \to C$ 和 $A \to C$，那么第三个依赖是冗余的，因为域 $C$ 可以用前两个依赖得到（域 $A$ 确定了域 $B$ 的值，同样域 $B$ 确定了域 $C$ 的值）。在 $A \to B$ 、 $B \to C$ 、 $C \to A$ 、 $A \to C$ 、 $C \to B$ 和 $B \to A$ 中，所有的依赖都是冗余的。

现在要求你编写一个程序，从给定的依赖关系中找出冗余的。
## 输入格式

第一行是一个不超过 $100$ 的整数 $n$，它表示文件中函数依赖的个数。

从第二行起每一行是一个函数依赖且互不重复，每行包含用字符 $\verb!-!$ 和 $\verb!>!$ 隔开的非空域列表。列表月包含大写的字母，函数依赖的数据行中不包括空格和制表符，不会出现“平凡”冗余依赖（如 $A \to A$）。虽然文件中没有对函数依赖编号，但其顺序就是编号 $1$ 到 $n$。
## 输出格式

每一行输出一个冗余依赖，以及其他依赖的一个序列以说明该依赖是冗余的。格式为 $\texttt{FD}\ x\ \texttt{is redundant using FDs:}\ p_1\ p_2 \cdots p_k$。其中 $x$ 是冗余的依赖的编号，$p_1,p_2,\cdots,p_k$ 是用来证明 $x$ 是冗余依赖的依赖序列。

如果许多函数依赖的序列都能被用来说明一个依赖是冗余的，则输出其中最短的证明序列。

如果这些函数依赖中不包含冗余依赖，则输出 `No redundant FDs`。

## 样例

### 样例输入 #1
```
3
A->BD
BD->C
A->C

```
### 样例输出 #1
```
FD 3 is redundant using FDs: 1 2

```
### 样例输入 #2
```
6
P->RST
VRT->SQP
PS->T
Q->TR
QS->P
SR->V

```
### 样例输出 #2
```
FD 3 is redundant using FDs: 1
FD 5 is redundant using FDs: 4 6 2
```
## 提示

### 样例 1 解释

依赖关系 $3$ 是冗余的。因为 $A\to C$ 可以使用前两个依赖关系 $A\to \{B,D\}$ 和 $\{B, D\}\to C$ 得到。

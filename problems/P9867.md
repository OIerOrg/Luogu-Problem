---
diff: NOI/NOI+/CTSC
pid: P9867
name: "[POI2021~2022R2] kon"
tag: ['POI（波兰）', '2022']
---
# [POI2021~2022R2] kon
## 题目背景

翻译自 [POI2021~2022R2 Day2T2](https://szkopul.edu.pl/problemset/problem/TEuljz3gsotYQRUKdlEZZr1G/statement/)。

## 题目描述

有一个舞会，一开始角色只有 $1$、$2$，他们两个都愿意和彼此跳舞。

然后存在 $q$ 个事件，分别对应下方的操作：

- `W x`：表示新加入一个人，他和编号 $x$ 的人愿意互相和对方跳舞。
- `Z x`：表示新加入一个人，初始时他和编号为 $x$ 的人愿意跳舞的对象都互相同意跳舞。
- `? x`：表示查询愿意与 $x$ 跳舞的有几个人。

新加入的人的编号是当前人数加一。
## 输入格式

第一行一个整数 $q\ (1 \leq q \leq 10^6)$。

然后 $q$ 行，每行一个字符和一个整数 $x$，含义如题目描述所述。
## 输出格式

对应每个 `?` 操作，输出一行答案。
## 样例

### 样例输入 #1
```
7
? 1
Z 2
? 1
Z 1
W 2
? 2
? 3
```
### 样例输出 #1
```
1
2
3
2
```
## 提示

样例解释：

![](https://cdn.luogu.com.cn/upload/image_hosting/qvrwztvc.png)

子任务分配：

| 子任务编号 | 特殊性质 | 分值 |
| :----------: | :----------: | :----------: |
| $1$ | $q \leq 5000$ | $20$ |
| $2$ | 仅包含操作 `Z` 和 `?` | $10$ |
| $3$ | `?` 总是在 $q$ 次操作的末尾部分出现 | $35$ |
| $4$ | 无附加限制 | $35$ |

